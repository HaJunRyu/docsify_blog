# 2021년 08월 11일 tn요일 TIL(Container, Presentational 디자인 패턴, Atomic 디자인 패턴)

## 오늘 한 일과 느낀점

- 오늘은 회사의 코드를 리뷰하며 작성한 글을 가져왔기 때문에 존칭으로 작성됐고, 그 중에서 디자인 패턴에 대한 내용을 가져왔습니다.

### enkor.kr을 리뷰하며 공부한 디자인 패턴

현재 컴포넌트 기반의 UI를 그리는 React, Vue와 같은 프레임워크(라이브러리)들이 대표적으로 2가지 패턴을 사용하는것으로 알고 있습니다.

#### Container, Presentational 디자인 패턴

정확히는 page레벨까지 존재하지만 page는 말 그대로 라우팅의 개념으로 사용하기 때문에 보통 Container와 presentational 레벨로 구분합니다.

- container component

데이터 fetching이 주 목적인 컴포넌트입니다. 일부 margin, padding이나 불가피한 레이아웃 조정을 제외하면 markup이나 style코드는 적용시키지 않습니다. 데이터 fetching이 아니더라도 UI에 필요한 데이터 및 상태를 가지고 있기 때문에 대부분 stateful합니다. 아래에서 설명 할 presentational 컴포넌트가 모여서 만들어집니다.

- presentational component

container component에서 props로 데이터나 state를 전달받아 UI를 표현하는 component입니다. (물론 모든 presentational component가 눈에 보여지는 UI는 아닐 수 있습니다.) 자체적인 markup 및 style코드를 포함 시킬 수 있습니다. 예외의 경우로 로컬 state를 가지기도 하는데 이것은 비즈니스 로직과는 분리된 오로지 UI만을 위한 state여야 됩니다. (예를 들어 비즈니스 로직과 상관없는 단순한 checkbox component의 checked 상태 등)

이 패턴을 사용하면 얻는 장점은 일관성을 유지하며 개발자에게 혼란을 주지 않을 수 있다는점에 있습니다. 만약 100개의 페이지가 존재하는 애플리케이션에서 상태 로직을 건들여야할때 개발자는 오로지 container 폴더에만 관심을 가질 수 있습니다. 만약 저 정도 규모의 애플리케이션이라면 컴포넌트 파일만 수백개 또는 천 단위를 넘어갈 수 있을텐데 이러한 패턴을 사용하지 않았을때 아마 상태로직을 직관적으로 빠르게 수정하는것은 불가능할것입니다.

#### Atomic 디자인 패턴

Atomic패턴은 위의 container, presentational 패턴에서 조금 더 세분화 된 패턴이라고 생각합니다. 2013년 6월 경 웹 디자이너인 [Brad Frost가 주장한 디자인 패턴](https://bradfrost.com/blog/post/atomic-web-design/)입니다. Atomic패턴에서는 컴포넌트 단위들을 크게 5가지로 세분화 합니다.

1. Atom(원자)

말 그대로 아주 작은 단위의 컴포넌트 입니다. 원자 단위처럼 다 이상 나눌 수 없거나 나눌 필요가 없는 컴포넌트입니다. 가장 재사용이 잦은 컴포넌트 이기도 하고 그렇기 때문에 상위 컴포넌트들에 비해 추상화도 많이 해주는 편입니다. (추상화를 해주지 않고 원자 단위부터 구체화를 해준다면 원자 컴포넌트를 사용하고 있는곳에서의 사이트 이펙트를 감당하지 못할것입니다.) 그리고 원자 단위 컴포넌트는 style은 갖되 positioning과 관련된 코드는 포함되지 않습니다. (margin, position, tarnsform 등)

2. Molecule(분자)

원자 단위의 컴포넌트들이 모여 조금은 더 복잡한 분자 단위의 컴포넌트입니다. 원자 단위 컴포넌트는 하나로는 작은 기능 하나도 수행하기 힘들지 모르지만 분자 단위부터는 하나의 작은 기능이라도 충실히 수행하는 컴포넌트가 될 수 있습니다. 만약 회사에 디자인 시스템이 존재한다면 이 분자 단위로 존재 할 가능성이 크고 하나의 애플리케이션뿐만 아니라 전사에서 재활용하게 되는 컴포넌트가 될 수도 있습니다. 만약 스토리북을 사용하거나 테스트 툴을 사용하여 단위 테스트를 한다면 분자 단위로 테스트 하는 경우가 많을 것입니다. 분자 단위에서 사용된 원자들의 positioning을 해줍니다.

3. Organism(유기체)

당연히 원자의 상위 레벨 컴포넌트로 분자가 모여 유기체 단위의 컴포넌트가 만들어집니다. 이때 분자 단위로 결합되지 않은 원자 단위 컴포넌트가 섞이는 경우도 있습니다. 유기체 단위가 되면 이제 하나의 페이지에서 제법 큰 부분을 차지하는 컴포넌트 하나가 완성된것입니다. 보통 유기체 단위가 되면 컴포넌트를 구체화 하는 경우가 많지만 경우에 따라 추상화를 해주어 재활용을 해주는 경우도 있습니다. 유기체 단위에서 사용된 분자, 원자들의 positioning을 해줍니다.

4. Template(템플릿)

앞서 설명한 맥락과는 조금 다르게 템플릿은 Page에서 보여질 레이아웃의 구조를 정하는곳입니다. React의 개발을 해봤다면 머릿속에 그려질것이라 생각합니다. Template에서 만들어진 공간에 component들을 넣어주기만 하는 방식으로 만들어줍니다.

5. Page(페이지)
   만들어놓은 템플릿을 불러와 적절한 컴포넌트들을 주입해줍니다. 이때 React의 컴포넌트들은 상태 및 데이터를 전달 받아야하기 때문에 Page컴포넌트에서 데이터 fetching 및 비즈니스 로직을 작성해줍니다. container, presentational 패턴과 비슷하게 상태를 관리하는 로직과 UI를 그려내는 로직이 분리된것을 볼 수 있습니다.

Atomic 패턴은 위처럼 기준을 가지고 컴포넌트를 만들어 재활용하고 합성하며 더 큰 단위의 컴포넌트를 만들어 결국에는 하나의 페이지를 그려내는식으로 사용하게 되는데 이 패턴의 단점으로 꼽히는것은 이런 디자인들을 그려내는건 결국 UX/UI 디자이너인데 개발자에게도 모호한 이 기준을 이해시키는게 어렵다는것입니다. 디자인 시안을 뽑을때 어떤것을 원자, 분자, 유기체 단위로 만들어줘야할지 그리고 디자인 상 같은 Input요소도 다른 디자인을 가질 수도 있을것입니다. (이것은 적절한 추상화를 통해 해결하겠지만 개발의 관점에서는 그렇게 좋을것 같진 않음)

그리고 Page 컴포넌트에서 Atom 컴포넌트까지 상태 또는 데이터를 전달해야 한다면 props의 depth가 많이 깊어질것입니다. 이것은 보통 TS를 사용하여 실수를 줄여주는 방식으로 해결하는것으로 알고는 있습니다.

그 이외에도 Atomic 패턴에 대한 단점, 한계에 대한 포스트를 참고하였으니 관심이 있으시다면 아래 링크로 접근해보시면 될 것 같습니다.

[아토믹 디자인 for React](https://medium.com/@inthewalter/atomic-design-for-react-514660f93ba)

[아토믹 디자인(Atomic Design) 적용기 : 한계점, 단점](https://sumini.dev/guide/009-dont-use-atomic-design/)

### 느낀점

필요하지 않은 코드를 미리 도입하지 말라는 말도 있지만 사실 일관성을 유지할 수 있는 방법론과 유지보수성을 좋게 만드는 패턴은 프로젝트를 구상할때 너무나도 중요한것 같습니다. 이 글을 정리하며 Atomic패턴이 실제로 사용할때의 한계점도 있지만 정말 체계적으로 작업을 할 수 있다면 새로운 경험을 할 수 있을것 같다는 생각이 들어 추후 프로젝트에서 적용시켜보고싶다는 생각이 들었습니다.

## 내일 할 일

- typescript스터디에서 얻고싶은점, 나아가고 싶은 방향성에 대해 고민하고 글로 정리하여 스터디 OT참여
- 시크릿 코드 케러셀 구현 영상 보며 나만의 방법으로 만들어보기
