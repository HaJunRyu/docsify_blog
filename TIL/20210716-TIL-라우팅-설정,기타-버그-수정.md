# 2021년 07월 16일 금요일 TIL(라우팅 설정, 기타 버그 수정)

## 오늘 한 일과 느낀점

### 라우팅 설정

이제 드디어 프레임워크 없이 SPA 라우팅을 구현할때가 왔다. realWorld를 2월에 TS로 만들어보며 한번 구현은 해봤지만 거의 해외 유투버의 영상을 그대로 따라해서 만들었고 이번에는 나만의 방식으로 한번 만들어보고 싶었다. 그래도 항상 나보다 먼저 좋은 코드를 구현해놓은것들을 레퍼런스로 해보려고 프레임워크 없는 프레임워크 개발 책에서 구현한 코드를 봤는데 역시 함수형으로 작성을 하였고 특이한건 결국 path를 보고 component를 마운트 해주는 로직에 setInterval을 사용했다는것이었다. 근데 사실 난 꼭 필요한게 아니면 무한히 반복이 되는 코드는 작성을 하기 싫어서 클로저의 개념을 사용하는것은 동일하게 했고 내부적인 로직은 아예 다르게 처리했다. 사실 처음에는 그냥 window.location.pathname 프로퍼티값을 보고 라우팅을 해주는 방식을 채택했는데 이렇게 했더니 diff알고리즘이 적용되지 않아서 다시 대공사를 하여 path값도 상태로 관리를 하고 결국 해당 라우트가 곧 상태이니 상태값으로 새로운 컴포넌트를 마운트하여 이전 라우트와 바뀌었는지 비교가 가능하게끔 수정하였더니 원하는대로 라우팅을 성공했다! 프레임워크 없이 개발하는데 점점 빠지는거 같아서 큰일인..........

## 기타 버그 수정

아무래도 아주 간단한 diff 알고리즘이다보니 현재 쓰이는 프론트엔드 프레임워크들에 비해 당연히 기능적으로 부실하다. 일단 list 렌더링에서 리액트럼 key props를 사용하여 비교하는 로직이 없기때문에 list의 가장 마지막 컴포넌트를 건들면 효과적으로 작동하지만 첫 컴포넌트를 만약 삭제한다면 그 뒤의 list들이 모두 다 리렌더링이 되버려서 아주 거슬린다... 그리고 이벤트 리스너에서 참조하고 있는 상태가 자동으로 갱신되지 않아서 리스너 내부에서 getState함수의 호출이 들어가 있어야 그때그때 변경된 상태를 정상적으로 불러올 수 있었다. Lv3 1기의 진행과정과 2기의 초창기만 해도 프레임워크 없이 개발을 하는게 너무 답답하고 가끔은 짜증(?)도 났었는데 요즘은 다른 개발을 하기 싫을 정도로 재미가 들려서 큰일이다ㅎㅎㅎ,,,

## 내일 할 일

- 매쉬 업 OT!
- next.js 기본개념 익히기
- 나만의 유튜브 강의실에서 본 영상으로 체크할 수 있는 기능 구현
