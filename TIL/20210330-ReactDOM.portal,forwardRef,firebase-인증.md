# 2021년 03월 30일 화요일 TIL (ReactDOM.portal, forwardRef, firebase 인증)

## 오늘 한 일과 느낀점

### 오전 10시 ~ 오후 1시 리액트 강의  
계속 진행되고 있는 무비리스트 예제에서 오늘은 모달 다이얼로그가 어떻게 작동해야하는지에 대해 알아보며 ReactDOM.portal과 forwardRef에 대해서 알아보았다. 일단 portal은 이해하기 쉽게 리액트 요소를 DOM의 root요소가 아닌 다른 노드의 자식요소로 차원이동 시키는거라고 설명하셨는데 일단 모달 다이얼로그에서 이 예를 든 이유가 모달 다이얼로그가 띄워지게 되면 접근성의 관점에서 모달(딤) 뒤의 영역은 포커싱을 받으면 안된다. 즉, `aria-hidden="true"` 어트리뷰트를 root Element에 줘야한다는것인데 만약 모달 다이얼로그가 root Element의 자식요소로 있다면 모달 다이얼로그도 포커싱 및 스크린리더에 읽히지 않게 되기 때문에 html에 예를 들어 modal-root라는 DOM요소를 만들어 실제로는 리액트가 렌더링 시키지만 다른 요소의 자식으로써 DOM에 마운트 시켜주는것이다. 하지만 실제로는 root요소의 자식인 컴포넌트에서 portal을 사용해준것이기 때문에 DOM 트리상 다른 노드의 자식으로 존재하더라도 이벤트의 전파가 가능하다고 한다. 이건 내부 로직을 지금 까볼 수 없으니 그렇다고 이해하고 넘어가야 할 영역인것 같다.  

  그리고 forwardRef는 가장 하위요소로 존재하는 컴포넌트에서 바로 ref를 참조하여 사용하는것이 아닌 부모 컴포넌트에서 그 하위 컴포넌트의 ref를 참조하고 싶을때 즉, 부모 컴포넌트에서 이벤트를 발생시키거나 하위 컴포넌트에 focus등의 동작을 일으키고 싶을때 createRef로 ref를 생성해 준 뒤 해당 하위 컴포넌트의 ref라는 props로 넘겨준 뒤 그 하위 컴포넌트를 정의할때 forwardRef함수의 콜백함수로써 컴포넌트를 주게 되면 첫번째 파라미터로 props가 넘어오고 두번째 파라미터로 상위요소에서 전달 한 ref가 전달되어 원하는 컴포넌트에 전달시켜줄 수 있다.  

## 기타 수업내용 메모

- 접근성 관점에서 동영상, 음악 자동 재생 기능이 있다면 당연히 사용자가 직접 멈출 수 있는 장치가 필요하다.  

- 흔히들 모달이라고 하는것들은 다이얼로그의 뒷 배경을 흐리게 만들어주는 딤을 지칭하는 것이고 정확하게는 모달 다이얼로그, 만약 뒷배경이 흐릿하게 되지 않는다면 단순히 다이얼로그이다.  

- tabindex를 코드가 수정될때마다 일일히 순서를 관리해 줄 것이 아니라면 절대 1이상의 숫자를 넣어주면 안된다. 0 또는 -1을 주고 DOM요소들을 논리적 순서에 맞게 배치해주어야 한다. 0을 줄때는 div같이 원래 포커싱이 안되는것들을 탭키로 포커싱을 해주려고 하는것이고 -1은 탭키로는 포커싱이 안되지만 JavaScript의 focus() 메서드로 포커싱을 줄 수 있기 때문에 프로그래밍 방식으로 포커싱을 주고싶을때 사용하게 된다.  

- 면접때 회사에서 개발하고싶은것중에 접근성에 대한 개발을 얘기를 할 수 있게끔 공부하고 프로젝트를 진행하자  

- NVDA(스크린리더)는 데스크탑 환경에서 스크린리더를 사용할 수 있는 무료 툴? 이다.  

- firebase의 auth객체에는 currentUser값이 있는데 초기값은 null이여서 이것으로 애플리케이션에서 인증상태에 따라 조건처리를 할 수 있다.

## 내일 할 일  

- firebase를 이용하여 인증정보를 데이터베이스에 담고 그것을 이용하여 간단하게 조건부 렌더링을 하여 로그인 상태와 로그아웃 상태에 따른 UI를 그리는 예제 만들어보기.  

- 오늘 원래 하려고했지만 못한 redux-thunk인강을 듣는데 지금 36-4강을 듣고있으니 36-10강 까지 대략적으로 1시간 10분정도 되니 따라 쓰고 하진 못해도 지하철 이동시간이나 쉬는시간등의 짬을 이용하여 꼭 36-10강까지는 다 듣기
