# 2021년 08월 02일 월요일 TIL(cypress기본, typesafe-actions)

## 오늘 한 일과 느낀점

### cypress 기본

블랙커피 스터디 차주 미션으로 cypress로 E2E테스트를 진행중이다. 테스트 코드를 한번도 작성한적이 없어서 걱정이 됐고 원래 유닛테스트를 먼저 경험하고 E2E를 해보는 경우가 많은걸로 알고 있지만 어떻게 하다보니 E2E부터 하게 되었다 허헣.. 일단 블랙커피 스터디에서 제공해주는 간단 사용법을 보며 어떤 느낌의 테스트인지 보고 공식문서를 보며 오늘 나만의 유튜브 강의실 미션에 아주 간단한 테스트 코드만 적용시켜봤다. 일단 첫 시나리오는 SPA에서 라우팅이 잘 되는지 작성해봤다. 특정 Link컴포넌트를 눌렀을때 url이 잘 변경되는지만 확인을 했다. 물론 페이지가 정말 잘 바뀌었는지에 대한 테스트 코드는 아직 작성해보지 않았다! 그리고 두번째 나만의 유튜브 강의실의 기능인 모달창에서 키워드를 통해 유튜브 영상을 검색하는 테스트 코드를 작성해봤다. 일단 modal open버튼을 눌렀을때 .modal 클래스를 가지고있는 요소가 존재하는지 (모달이 정상적으로 열렸는지), .search-input 요소를 찾아 typing을 하고 값을 확인하여 정상적으로 typing이 되었는지 확인하는 코드까지만 작성해봤다. 확실히 실제 유저가 사용하는것처럼 시나리오를 작성하듯 테스트 코드를 작성하니 조금 어색한 부분도 보였던것 같고 왜 테스트 코드를 작성해야하는지는 알게된것 같다!

### typesafe-actions

typescript를 react에 적용시키는 연습을 하는중에 오늘은 redux를 적용시켜보았다. 사실 기존의 redux의 FLUX패턴을 따라 사용하니 타입을 지정해주어 더욱 안전하고 편하게 쓴다는것 이외에는 다른것이 없어서 어렵진 않았다. 그러던중 이름에서 알 수 있듯이 타입을 지키며 action들을 정의할 수 있는 라이브러리인 typesafe-actions를 사용해봤다. 다운로드 수도 적지 않고 사용법도 꽤나 간단한것 같았다. 근데 처음 접하게 된 예제에서는 라이브러리에서 createStandardAction라는 함수를 사용했는데 그걸 사용해보려고 하니 지금은 폐지되었다고 나왔고 공식문서를 찾아보니 이제 createAction으로 바뀌었다는걸 알 수 있었다. 그래서 기존 작성해야했던 action creator함수와 typesafe-actions를 사용한 함수의 차이를 한번 살펴보자!

```typescript
const increaseBy = (diff: number) => ({ type: 'counter/INCREASE', payload: diff });

const increaseBy = createAction('counter/INCREASE_BY')<number>();
```

## 내일 할 일

- cypress로 나만의 유튜브 강의실 E2E 테스트 코드 최대한 꼼꼼히 작성해보기
- ts로 redux 미들웨어 사용해보기
