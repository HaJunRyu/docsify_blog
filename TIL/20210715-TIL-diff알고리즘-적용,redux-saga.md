# 2021년 07월 15일 목요일 TIL(diff알고리즘 적용, redux-saga)

## 오늘 한 일과 느낀점

### diff알고리즘 적용

요즘 자바스크립트로 개발하는데 푹 빠진것 같다. 사실 이번 Lv3 2기를 시작할때는 하.. 언제 이걸 첨부터 다시쓰냐 싶었는데 정말 1기때와는 다른 구조로 작성된 코드로 어제까지 기분이 좋았지만 단 한가지 걸리는게 action이 일어날때마다 상태가 변경되고 애플리케이션의 a to z까지 모두 다 리렌더링이 일어난다는것이었다..... 사실 심각한 이슈 하하하.... 그래서 원래 1주차부터 적용하려다가 포기한 diff알고리즘을 다시 들여다보았다. diff알고리즘의 베이스코드는 프레임워크 없는 프론트엔드 개발 책에서 가져왔고 그것을 적용시키는것은 애플리케이션의 구조마다 조금씩 다를것이다. 하지만 나는 책과 같은 구조를 택하지 않았고 모두 다 전역상태로 관리를 했기 때문에 레퍼런스 코드가 존재하지 않아 많은 삽질을 했다. 그리고 한 3시간정도 제자리만 삥삥 돌다가 결국 너무 졸려 양치를 하러갔는데 양치를 하다보니 갑자기 아이디어가 떠올랐고 너무나도 간단하다는것을 깨달았다. 역시 힘들땐 잠시 쉬어주는것이,,, 그냥... diff알고리즘으로 비교할 대상을 만들어주는일이 필요한거였는데 애플리케이션은 이미 알아서 전역상태를 보고있고 이것이 모듈화되어 있었다. 쉽게 말해 그냥 App컴포넌트만 호출하면 변경된 상태로 다시 그려진 컴포넌트들을 만들 수 있다는 소리였다. 그래서 #root를 가져와 복사를 한 다음 복사본에는 변경된 상태의 DOM객체를 넣어주었고 이것을 실제돔과 비교해주었다. 이번 미션이 유튜브 api를 사용해 iframe으로 렌더링 시키는것이었는데 diff알고리즘을 적용하니... 그냥 눈에 띄게 성능 향상이 있고 그냥 깜빡임 없이 바뀐것들만 업데이트 되니까 너무너무너무 기분이 좋은!!!!!! 리액트를 처음쓰면 이게 왜 좋아? 하지만 자바스크립트로 CSR을 구현해본 사람들은 다 알거다... 프레임워크가 얼마나 편한건지ㅠㅠㅠㅠ

### redux-saga

오늘 원래 목표가 redux-saga를 공부하고 리액트로 지금 블랙커피 스터디 미션을 구현해보는것이었는데 생각보다 복잡하고 (하지만 상당히 나이스해 보인다!) 오늘 수면부족으로 새로운걸 공부하려니 잠이 솔솔.... 그래서 위의 diff알고리즘을 삽질하며 구현하러 갔었던것이다ㅎㅎ 그래도 제너레이터에 대해 좀 공부를 한것 같다. yield....

## 내일 할 일

- 블랙커피 미션에 페이지를 하나 추가하되 SPA처럼 라우트에 따라 렌더링을 다르게 해주도록 구현하기
- 저장된 영상이 없을때 알려주는 메세지를 구현하기
- 무한스크롤시 검색 키워드가 유지되지 않거나 페이지토큰이 잘 넘어가지 않는것 같은 버그가 있어 해결하기
