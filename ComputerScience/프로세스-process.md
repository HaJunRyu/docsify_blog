# 프로세스(process)

## 프로세스란?
프로세스란 실행중에 있는 프로그램을 의미한다.  
커널의 스케줄링 대상이 되는 작업(task)이라는 용어와 거의 같은 의미로 쓰인다.  
프로세스 내부에는 최소 하나의 스레드를 가지고 있는데 실제로는 스레드 단위로 스케줄링을 한다.  
HDD나 SSD에 존재하는 프로그램을 실행하면 실행을 위해서 메모리 할당이 이루어지고 할당된 메모리 공간으로 바이너리 코드가 올라가게 된다.  
이 순간부터 프로그램이 프로세스라고 불리게 된다.

## 프로그램과 프로세스
프로그램은 일반적으로 HDD나 SSD같은 저장 장치에 저장되어 있는 실행코드(바이너리 코드)를 뜻한다.  
프로세스는 그 프로그램을 구동하여 프로그램 자체와 프로그램의 상태가 메모리 상에서 실행되는 작업 단위를 말한다.

## 프로세스의 상태
커널 내에는 준비 큐, 대기 큐, 실행 큐 등의 자료구조가 있고 커널은 이것들을 이용하여 프로세스의 상태를 관리한다.

-     생성(Create) : 프로세스가 생성되는 중이다.
-     실행(Running) : 프로세스가 CPU를 차지하여 명령어들이 실행되고 있다.
- ```
  준비(Ready) : 프로세스가 CPU를 사용하고 있지는 않지만 언제든지 사용할 수 있는 상태로, CPU가 할당되기를 기다리고 있다.
  일반적으로 준비 상태의 프로세스 중 우선순위가 높은 프로세스가 먼저 CPU를 할당받는다.
  ```
- ```
  대기(Waiting) : 보류(block)라고 부르기도 한다. 프로세스가 입출력 완료, 시그널 수신 등 어떤 사건을 기다리고 있는 상태를 말한다.
  이 상태에 대해서는 조금 더 세부적인 상태로 구분하기도 한다.
  ```
-     종료(Terminated) : 프로세스의 실행이 종료되었다.

## 프로세스(process)의 메모리 구조 (프로세스 하나당 하나씩 존재)
-     Code(Text) 영역 : 프로그램을 실행시키는 실행 파일 내의 명령어들이 올라간다. (바이너리코드로 변환된 소스코드)
-     Data 영역 : 초기화 된 전역변수, static 변수를 저장
-     BSS 영역 : 초기화 되지 않은 전역변수, static 변수(데이터)를 저장
-     Heap 영역 : 동적할당을 위한 메모리 영역
- ```
  Stack 영역 : 지역변수, 함수 호출시 전달되는 인자(파라미터) 등 임시적인 데이터를 위한 메모리 영역

  함수가 호출 시에 생성되고 함수가 끝나면 반환된다.
  Stack의 사이즈는 각 프로스세마다 할당되지만 프로세스가 메모리에 로드될 때 Stack의 사이즈가 고정되어 있어 런타임시에 Stack사이즈를 바꿔줄 수 없다.
  그래서 Stack 영역은 보통 할당받은 메모리의 끝부분에 존재한다.
  ```

## PCB
PCB는 Process Control Block의 약어로 운영체제가 프로세스를 제어하기 위해 프로세스의 상태 정보를 저장하는 구조체이다.  
위에서 설명한 프로세스 상태관리를 위해서도 필요하고 CPU에서 실행 할 프로세스를 교체하는 기술인 Context Switching을 위해서 필요하다.  
PCB는 프로세스 생성시 만들어지며 주 기억장치에 유지된다.

### PCB에 포함된 정보
-     PID: 프로세스의 고유 번호를 의미한다.  

-     State(상태): 준비, 대기, 실행 등의 상태를 의미한다.  

-     포인터: 다음 실행될 프로세스의 포인터이다.  

-     Register save area: 레지스터 관련 정보이다.  

-     Priority: 스케줄링 및 프로세스의 우선순위이다.  

-     또한 할당된 자원 정보도 포함하고 있다.  

-     Account: CPU 사용시간, 실제 사용된 시간도 포함한다.  

-     입출력 상태 정보를 포함한다.  